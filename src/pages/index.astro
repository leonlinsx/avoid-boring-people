---
import BaseLayout from '../layouts/BaseLayout.astro';
import PostCard from '../components/PostCard.astro';

// Load posts
const allPosts = await Astro.glob('./writing/*.md');

// Sort newest first
const posts = allPosts
  .sort((a, b) => new Date(b.frontmatter.pubDate) - new Date(a.frontmatter.pubDate))
  .slice(0, 3); // only show latest 3
---

<BaseLayout title="Home">
  <section class="hero">
    <h1>I write to think clearly about finance, tech, and ideas that interest me</h1>
    <p>Sharing my writing helps my ideas compound and helps me connect with other curious people.</p>
    <p><a href="/newsletter">Join 5000+ readers →</a></p>
    <p><a href="/best-of">New here? Start here →</a></p>
  </section>

  <section class="latest-posts">
    <h2>Latest Posts</h2>
    {posts.map(post => (
      <PostCard post={post} />
    ))}
  </section>

  <!-- About teaser -->
  <section class="about-teaser">
    <p>
      I've worked in investing, investment banking, big tech, and startups,
      and now I write to make sense of it all.
      <a href="/about">Read more →</a>
    </p>
  </section>

  <!-- As featured in -->
  <section class="featured">
    <h3>As featured in</h3>
    <div class="logos">
      <img src="/logos/sample1.png" alt="Publication 1" />
      <img src="/logos/sample2.png" alt="Publication 2" />
    </div>
  </section>

  <!-- Contact CTA -->
  <section class="contact-cta">
    <p>
      I consult and angel invest selectively.
      <a href="/about#contact">Get in touch →</a>
    </p>
  </section>
</BaseLayout>

<style>
  .about-teaser, .featured, .contact-cta {
    margin-top: 3rem;
    text-align: center;
  }

  .featured .logos {
    display: flex;
    justify-content: center;
    gap: 2rem;
    margin-top: 1rem;
  }

  .featured img {
    max-height: 40px;
    filter: grayscale(100%);
    opacity: 0.8;
  }

  .featured img:hover {
    opacity: 1;
  }
</style>
