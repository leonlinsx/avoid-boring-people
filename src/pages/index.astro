---
import BaseLayout from "../layouts/BaseLayout.astro";
import PostList from "../components/PostList.astro";
import { getCollection } from "astro:content";
import { SITE_TITLE } from "../consts";

const allPosts = await getCollection("blog");

// Pick only posts you marked with featured: true in frontmatter
const featured = allPosts
  .filter((post) => post.data.featured)
  .sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf());
---

<BaseLayout
  title={`Home | ${SITE_TITLE}`}
  description="Writing on finance, tech, and other ideas by Leon Lin"
>
  <!-- Hero -->
  <section class="hero">
    <h1>
      I write to make sense of finance, tech, and the ideas shaping our future
    </h1>
    <p>
      Sharing my writing helps my ideas compound and helps me connect with curious
      people.
    </p>
    <p class="subtle-cta">
      Learn more about me <a href="/about">here</a>, or
      <a href="/newsletter">join 5,000+ readers</a> who get updates by email.
    </p>
  </section>

  <!-- Start Here -->
  <section class="best-of">
    <h2>Start Here</h2>
    <p class="subtext">
      Some of my favourite pieces â€” a good place to begin if you're new here.
    </p>
    <PostList posts={featured} />
  </section>

  <!-- Featured Logos -->
  <section class="featured">
    <h3>As featured in</h3>
    <div class="logo-row">
      <img src="/logos/hacker_news_logo.png" alt="HackerNews" />
      <img src="/logos/failory_logo.png" alt="Failory" />
    </div>
  </section>
</BaseLayout>
